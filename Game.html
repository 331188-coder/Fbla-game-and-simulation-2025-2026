<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MazeMind: Elite STEM Edition</title>
    <style>
        :root { --se: #00ff41; --sci: #a29bfe; --eng: #00d2ff; --biz: #f1c40f; --plt: #ffffff; }
        body { font-family: 'Segoe UI', sans-serif; background: #0a0a0c; color: white; display: flex; flex-direction: column; align-items: center; margin: 0; padding: 15px; }
        
        h1 { letter-spacing: 4px; margin-bottom: 10px; }
        .container { display: flex; gap: 25px; background: #151518; padding: 25px; border-radius: 16px; border: 1px solid #333; box-shadow: 0 10px 40px rgba(0,0,0,0.6); }
        canvas { background: #000; border: 2px solid #444; border-radius: 6px; }
        
        .ui-panel { width: 320px; display: flex; flex-direction: column; gap: 15px; }
        .card { padding: 20px; border-radius: 10px; background: #1e1e24; border-left: 6px solid #444; }
        
        .theme-se { border-color: var(--se); }
        .theme-sci { border-color: var(--sci); }
        .theme-eng { border-color: var(--eng); }
        .theme-biz { border-color: var(--biz); }
        .theme-plt { border-color: var(--plt); }

        #terminal { background: #000; color: var(--se); border: 1px solid var(--se); padding: 10px; font-family: monospace; width: 100%; box-sizing: border-box; border-radius: 4px; }
        button { cursor: pointer; padding: 12px; font-weight: bold; border: none; border-radius: 6px; transition: 0.2s; width: 100%; margin-bottom: 8px; font-size: 12px; }
        button:hover { filter: brightness(1.2); }
        
        .hidden { display: none; }
        .stat-box { font-size: 1.1em; margin: 10px 0; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 6px; }
        
        #insight-section { width: 945px; margin-top: 20px; padding: 20px; background: #151518; border-radius: 10px; border: 1px solid #333; }
        .insight-text { color: #ccc; line-height: 1.6; font-style: italic; }
        .accent-text { font-weight: bold; color: #fff; }
    </style>
</head>
<body>

<h1>MAZE<span id="title-accent" style="color:#666">MIND</span></h1>

<div class="container">
    <canvas id="gameCanvas" width="600" height="600"></canvas>

    <div class="ui-panel">
        <div id="career-select">
            <h3 style="margin-top:0">Select Professional Path:</h3>
            <button style="background:var(--se); color:black" onclick="setup('SE')">SOFTWARE ENGINEER</button>
            <button style="background:var(--sci); color:black" onclick="setup('SCI')">FIELD SCIENTIST</button>
            <button style="background:var(--eng); color:black" onclick="setup('ENG')">ENGINEER</button>
            <button style="background:var(--biz); color:black" onclick="setup('BIZ')">BUSINESS MANAGER</button>
            <button style="background:var(--plt); color:black" onclick="setup('PLT')">PILOT</button>
        </div>

        <div id="game-ui" class="card hidden">
            <h2 id="active-role" style="margin:0 0 10px 0;">Role</h2>
            
            <div id="se-ui" class="hidden">
                <textarea id="terminal" rows="3" placeholder="U,D,L,R..."></textarea>
                <button style="background:var(--se); color:black; margin-top:10px" onclick="executeSE()">RUN PROGRAM</button>
            </div>

            <div id="biz-ui" class="hidden">
                <div class="stat-box" style="color:var(--biz)">Capital: <span id="money">$200</span></div>
            </div>

            <div id="eng-ui" class="hidden">
                <div class="stat-box" style="color:var(--eng)">Status: In Motion</div>
            </div>

            <div id="plt-ui" class="hidden">
                <div class="stat-box" style="color:var(--plt)">Mode: High Altitude</div>
            </div>

            <button style="background:#333; color:white; margin-top:20px" onclick="location.reload()">ABORT MISSION</button>
        </div>
    </div>
</div>

<div id="insight-section">
    <h3 style="margin-top:0">STEM Mindset Insight</h3>
    <p id="mindset-text" class="insight-text">Select a career to reveal how these professionals approach problem-solving.</p>
</div>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const grid = 20;
    const res = canvas.width / grid;

    const maze = [
        [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
        [0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1],
        [1,1,1,0,1,1,1,0,1,0,1,1,0,1,1,1,1,1,0,1],
        [1,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1],
        [1,1,1,1,1,1,1,0,1,1,1,1,1,1,0,1,1,1,1,1],
        [1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
        [1,0,1,0,1,0,1,1,1,1,1,1,0,1,1,1,1,1,0,1],
        [1,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,1,0,1],
        [1,0,1,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1],
        [1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,1,0,1],
        [1,0,1,1,1,1,1,1,0,1,1,1,1,1,0,1,0,0,0,1],
        [1,0,0,0,0,0,0,1,0,0,0,0,0,1,0,1,0,1,0,1],
        [1,0,1,1,1,1,0,1,1,1,1,1,0,1,0,1,0,1,0,1],
        [1,0,0,0,0,1,0,0,0,0,0,1,0,1,0,0,0,1,0,1],
        [1,0,1,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1],
        [1,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1],
        [1,0,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1],
        [1,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,1,1],
        [1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,0],
        [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ];

    let player = { x: 0, y: 1, angle: 0 };
    let goal = { x: 19, y: 18 };
    let coins = [{x:7, y:3}, {x:12, y:7}, {x:1, y:15}, {x:16, y:11}, {x:10, y:13}, {x:3, y:17}];
    let history = [];
    let role = '';
    let money = 200;
    let isMoving = false;

    const insights = {
        'SE': 'Software Engineers view problems as a sequence of logical states. By pre-programming the path, you are simulating how <span class="accent-text">Algorithms</span> must be perfect before execution.',
        'SCI': 'Scientists operate on <span class="accent-text">Empirical Observation</span>. They use iterative testing and data markers (circular trail) to turn chaos into a mapped reality.',
        'ENG': 'Engineers analyze the <span class="accent-text">Physics of Systems</span>. By using inertia, you calculate momentum. Actions have kinetic consequences.',
        'BIZ': 'Business Managers focus on <span class="accent-text">Resource Optimization</span>. They solve problems by calculating the "Return on Investment" of a detour.',
        'PLT': 'Pilots represent <span class="accent-text">Efficiency and Perspective</span>. By rising above constraints, they demonstrate bypass techniques using specialized tech.'
    };

    function setup(type) {
        role = type;
        document.getElementById('career-select').classList.add('hidden');
        document.getElementById('game-ui').classList.remove('hidden');
        document.getElementById('game-ui').className = 'card theme-' + type.toLowerCase();
        document.getElementById('title-accent').style.color = 'var(--' + type.toLowerCase() + ')';
        document.getElementById('active-role').innerText = (type === 'ENG' ? 'Engineer' : (type === 'SE' ? 'Software Engineer' : (type === 'SCI' ? 'Field Scientist' : (type === 'PLT' ? 'Pilot' : 'Business Manager'))));
        document.getElementById('mindset-text').innerHTML = insights[type];
        
        document.getElementById('se-ui').classList.toggle('hidden', type !== 'SE');
        document.getElementById('biz-ui').classList.toggle('hidden', type !== 'BIZ');
        document.getElementById('eng-ui').classList.toggle('hidden', type !== 'ENG');
        document.getElementById('plt-ui').classList.toggle('hidden', type !== 'PLT');
        
        draw();
    }

    window.addEventListener('keydown', e => {
        if(role === '' || role === 'SE' || isMoving) return;
        let dx = 0, dy = 0;
        if(e.key === 'ArrowUp') { dy = -1; player.angle = -Math.PI/2; }
        if(e.key === 'ArrowDown') { dy = 1; player.angle = Math.PI/2; }
        if(e.key === 'ArrowLeft') { dx = -1; player.angle = Math.PI; }
        if(e.key === 'ArrowRight') { dx = 1; player.angle = 0; }

        if(dx !== 0 || dy !== 0) {
            if(role === 'ENG') slide(dx, dy);
            else move(dx, dy);
        }
    });

    function move(dx, dy) {
        let nx = player.x + dx;
        let ny = player.y + dy;
        let canMove = (role === 'PLT') || (nx >= 0 && nx < grid && ny >= 0 && ny < grid && maze[ny][nx] === 0);

        if(nx >= 0 && nx < grid && ny >= 0 && ny < grid && canMove) {
            player.x = nx;
            player.y = ny;
            if(role === 'SCI') history.push({x: nx, y: ny});
            if(role === 'BIZ') {
                money -= 5;
                coins = coins.filter(c => {
                    if(c.x === player.x && c.y === player.y) { money += 60; return false; }
                    return true;
                });
                document.getElementById('money').innerText = "$" + money;
                if(money < 0) { alert("Bankrupt!"); location.reload(); }
            }
            draw();
            checkWin();
            return true;
        }
        return false;
    }

    function slide(dx, dy) {
        isMoving = true;
        let interval = setInterval(() => {
            if(!move(dx, dy)) { clearInterval(interval); isMoving = false; }
        }, 50);
    }

    function executeSE() {
        let cmds = document.getElementById('terminal').value.toUpperCase().split(/[\s,]+/);
        let i = 0;
        let interval = setInterval(() => {
            if(i >= cmds.length) { clearInterval(interval); return; }
            let c = cmds[i];
            if(c === 'U') move(0, -1); else if(c === 'D') move(0, 1);
            else if(c === 'L') move(-1, 0); else if(c === 'R') move(1, 0);
            i++;
        }, 250);
    }

    function checkWin() {
        if(player.x === goal.x && player.y === goal.y) {
            setTimeout(() => { alert("SUCCESS! Objective Met."); location.reload(); }, 100);
        }
    }

    function draw() {
        ctx.clearRect(0,0,600,600);
        for(let y=0; y<grid; y++) {
            for(let x=0; x<grid; x++) {
                if(role === 'SCI') {
                    if(Math.hypot(x-player.x, y-player.y) > 2.5) {
                        ctx.fillStyle = '#080808'; ctx.fillRect(x*res, y*res, res, res); continue;
                    }
                }
                if(maze[y][x] === 1) {
                    ctx.fillStyle = '#222'; ctx.fillRect(x*res, y*res, res, res);
                    ctx.strokeStyle = '#333'; ctx.strokeRect(x*res, y*res, res, res);
                }
                if(x === goal.x && y === goal.y) { ctx.fillStyle = '#ff4757'; ctx.fillRect(x*res, y*res, res, res); }
            }
        }

        if(role === 'BIZ') {
            coins.forEach(c => {
                ctx.fillStyle = '#f1c40f'; ctx.beginPath(); ctx.arc(c.x*res+res/2, c.y*res+res/2, 5, 0, Math.PI*2); ctx.fill();
            });
        }

        if(role === 'SCI') {
            history.forEach(h => {
                ctx.fillStyle = 'rgba(162, 155, 254, 0.4)'; ctx.beginPath();
                ctx.arc(h.x*res+res/2, h.y*res+res/2, res/5, 0, Math.PI*2); ctx.fill();
            });
        }

        ctx.save();
        ctx.translate(player.x*res+res/2, player.y*res+res/2);
        ctx.rotate(player.angle);
        ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--'+role.toLowerCase()).trim();
        ctx.shadowBlur = 15; ctx.shadowColor = ctx.fillStyle;

        if(role === 'PLT') {
            ctx.beginPath();
            ctx.moveTo(10, 0); ctx.lineTo(-10, -8); ctx.lineTo(-10, 8);
            ctx.closePath(); ctx.fill();
        } else {
            ctx.beginPath(); ctx.arc(0, 0, res/3, 0, Math.PI*2); ctx.fill();
        }
        ctx.restore();
    }

    draw();
</script>
</body>
</html>
